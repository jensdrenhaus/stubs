/*****************************************************************************/
/* Betriebssysteme                                                           */
/*---------------------------------------------------------------------------*/
/*                                                                           */
/*                                  P I T                                    */
/*                                                                           */
/*---------------------------------------------------------------------------*/
/* Programmable Interval Timer.                                              */
/*****************************************************************************/
#include "machine/pit.h"

	void PIT::interval(int us) {
		PIT1_CTRL.outb(0b00110100);
		unsigned int command = (us * 1000 + 838/2) / 838;
		
		PIT1_CNT.outb(command);
		PIT1_CNT.outb(command >> 8);
		
		set_us = us;
	}
